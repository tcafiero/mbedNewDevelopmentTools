from optparse import OptionParser

from workspace_tools.toolchains import TOOLCHAINS
from workspace_tools.targets import TARGET_NAMES


def get_default_options_parser():
    parser = OptionParser()
    
    parser.add_option("-m", "--mcu",
                  help="build for the given MCU (%s)" % ', '.join(TARGET_NAMES),
                  metavar="MCU")
    
    parser.add_option("-t", "--tool",
                  help="build using the given TOOLCHAIN (%s)" % ', '.join(TOOLCHAINS),
                  metavar="TOOLCHAIN")
    
    parser.add_option("-c", "--clean", action="store_true", default=False,
                  help="clean the build directory")
    
    parser.add_option("-o", "--options", action="append",
                  help='Add a build option ("save-asm": save the asm generated by the compiler, "debug-info": generate debugging information)')
    
    return parser
